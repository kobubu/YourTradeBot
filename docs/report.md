# Отчет о проекте: Telegram Stock Forecast Bot

## Цель разработки

Создание интеллектуального телеграм-бота для прогнозирования стоимости акций международных компаний с использованием современных методов машинного обучения. Проект направлен на предоставление пользователям доступного инструмента для анализа рынка акций с автоматической генерацией торговых рекомендаций.

## Основной функционал

###  Анализ и прогнозирование
- **Загрузка биржевых данных** в реальном времени из Yahoo Finance и Stooq
- **Мультимодельное прогнозирование** с использованием трех различных подходов
- **Автоматический выбор лучшей модели** на основе метрик качества
- **30-дневный прогноз** цен акций с визуализацией

###  Торговые рекомендации
- **Генерация сигналов** покупки и продажи на основе анализа локальных экстремумов
- **Фильтрация сделок** по минимальной прибыли и порогам рентабельности
- **Расчет потенциального дохода** для заданной суммы инвестиций

###  Пользовательский интерфейс
- **Telegram-интерфейс** с инлайн-кнопками для быстрого доступа
- **Интерактивные команды** (/start, /forecast, /tickers, /help)
- **Визуализация результатов** в формате графиков PNG и PDF

## Особенности проекта

###  Интеллектуальная система моделей
- **Random Forest** - для прогнозирования на основе лаговых признаков
- **SARIMAX** - с автоматическим подбором параметров для временных рядов
- **LSTM/GRU** - нейросетевые модели для сложных паттернов
- **Автоматический выбор** лучшей модели по метрике RMSE

###  Оптимизация производительности
- **Кэширование моделей** с TTL 24 часа для избежания переобучения
- **Система кэширования данных** для ускорения загрузки исторических данных
- **Автоматическая очистка** устаревших артефактов

###  Мониторинг и аналитика
- **Детальное логирование** всех запросов пользователей
- **Интеграция с Google Sheets** для удаленного сбора статистики
- **Сохранение метрик** моделей и визуализаций прогнозов

###  Архитектурные решения
- **Модульная структура** с четким разделением ответственности
- **CI/CD пайплайн** с автоматическим тестированием и линтингом
- **Контейнеризация** через Docker для простого развертывания

## Технические компоненты

### Основные файлы и каталоги проекта

#### 1. Каталог `artifacts/` – содержит артефакты моделей:
- Файлы в формате `.json` с характеристиками модели (тип, количество лагов, RMSE, MAPE и др.)
- Графики в формате `.png` с визуализацией прогноза на валидационной выборке
- Отчеты в формате `.pdf` с визуализацией 30-дневного прогноза

#### 2. Каталог `core/` – ядро приложения:
- **`data.py`** - Обработка и загрузка данных из Yahoo Finance и Stooq с системой кэширования
- **`models.py`** - Реализация системы выбора и обучения ML-моделей (RandomForest, SARIMAX, LSTM)
- **`forecast.py`** - Генерация торговых рекомендаций на основе прогноза цен
- **`model_cache.py`** - Система кэширования обученных моделей с автоматической очисткой
- **`recommend.py`** - Анализ прогноза для генерации торговых сигналов
- **`logging_utils.py`** - Логирование запросов в CSV и Google Sheets

#### 3. Каталог `logs/` – система логирования:
- `logs.csv` – детальный лог всех операций проекта

#### 4. Каталог `tests/` – тестирование:
- **`test_models.py`** - Тестирование процесса обучения моделей и генерации прогнозов
- **`test_recommend.py`** - Тестирование модуля рекомендаций и фильтрации сделок

#### 5. Корневой каталог – конфигурация:
- **`.github/`** - воркфлоу-файлы для CI/CD
- **`bot.py`** - основной файл телеграм-бота с обработкой команд
- **Конфигурационные файлы** - настройки окружения, зависимостей, линтеров

## Пример работы

1. **Инициализация**: Пользователь добавляет бота и запускает командой `/start`
2. **Выбор акции**: Возможность выбрать компанию для прогноза по тикеру через инлайн-кнопки
3. **Обучение моделей**: Автоматическое обучение трех моделей (Random Forest, GRU, SARIMAX)
4. **Генерация прогноза**: 30-дневный прогноз с визуализацией и рекомендациями
5. **Торговые сигналы**: Рекомендации по точкам покупки/продажи с расчетом потенциальной прибыли

**Особенность**: Обучение моделей происходит раз в сутки с последующим переиспользованием, что значительно ускоряет работу системы. Все операции логируются в Google Sheets и CSV-файлы для последующего анализа.

## Технологический стек
- **Python 3.8+** с библиотеками машинного обучения (scikit-learn, TensorFlow, statsmodels)
- **Telegram Bot API** для пользовательского интерфейса
- **Yahoo Finance API** для получения биржевых данных
- **Docker** для контейнеризации приложения
- **GitHub Actions** для CI/CD пайплайна